{{ define "main" }}
<div class="container">
    <div class="appointment-container">
        <div class="appointment-header">
            <h1>{{ .Title }}</h1>
            <div class="appointment-description">{{ .Content }}</div>
        </div>
        
        <!-- 預約表單 -->
        <div class="appointment-form-container">
            <form id="appointment-form" class="appointment-form">
                <div class="form-group">
                    <label for="name">姓名 <span class="required">*</span></label>
                    <input type="text" id="name" name="name" required minlength="2" maxlength="20">
                    <div class="error-message" id="name-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="email">電子郵件 <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                    <div class="error-message" id="email-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="line">LINE ID <span class="required">*</span></label>
                    <input type="text" id="line" name="line" required>
                    <div class="error-message" id="line-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="phone">聯絡電話 <span class="required">*</span></label>
                    <input type="tel" id="phone" name="phone" required pattern="[0-9\-\+]{8,15}">
                    <div class="error-message" id="phone-error"></div>
                    <small>請輸入有效的台灣手機或市話號碼</small>
                </div>
                
                <div class="form-group">
                    <label>諮詢服務類型 <span class="required">*</span></label>
                    <div class="service-buttons">
                        <input type="radio" id="service-business" name="service" value="工商登記" required>
                        <label for="service-business" class="service-button">工商登記</label>
                        
                        <input type="radio" id="service-tax" name="service" value="稅務申報" required>
                        <label for="service-tax" class="service-button">稅務申報</label>
                        
                        <input type="radio" id="service-audit" name="service" value="財稅簽證" required>
                        <label for="service-audit" class="service-button">財稅簽證</label>
                        
                        <input type="radio" id="service-consulting" name="service" value="諮詢服務" required>
                        <label for="service-consulting" class="service-button">諮詢服務</label>
                        
                        <input type="radio" id="service-other" name="service" value="其他服務" required>
                        <label for="service-other" class="service-button">其他服務</label>
                    </div>
                    <div class="error-message" id="service-error"></div>
                </div>
                
                <div class="form-group">
                    <label for="content">諮詢內容</label>
                    <textarea id="content" name="content" rows="5"></textarea>
                    <small>請簡要描述您的諮詢需求，以便我們更好地為您安排合適的專業人員</small>
                </div>
                
                <div class="form-group privacy-agreement">
                    <input type="checkbox" id="privacy" name="privacy" required>
                    <label for="privacy">我已閱讀並同意<a href="/privacy-policy/" target="_blank">隱私權政策</a>，並同意提供個人資料用於預約諮詢服務 <span class="required">*</span></label>
                    <div class="error-message" id="privacy-error"></div>
                </div>
                
                <div class="form-group">
                    <button type="submit" id="submit-btn" class="submit-button">送出預約</button>
                    <div id="form-status" class="form-status"></div>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('appointment-form');
  const submitBtn = document.getElementById('submit-btn');
  const formStatus = document.getElementById('form-status');
  
  // 服務按鈕點擊效果
  const serviceButtons = document.querySelectorAll('.service-button');
  serviceButtons.forEach(button => {
    button.addEventListener('click', function() {
      serviceButtons.forEach(btn => btn.classList.remove('selected'));
      this.classList.add('selected');
    });
  });
  
  // 表單驗證與提交
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // 重置錯誤訊息
    const errorMessages = document.querySelectorAll('.error-message');
    errorMessages.forEach(el => el.textContent = '');
    
    // 驗證姓名
    const name = document.getElementById('name').value.trim();
    if (name.length < 2 || name.length > 20) {
      document.getElementById('name-error').textContent = '姓名長度應為2-20個字元';
      return;
    }
    
    // 驗證電子郵件
    const email = document.getElementById('email').value.trim();
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
      document.getElementById('email-error').textContent = '請輸入有效的電子郵件地址';
      return;
    }
    
    // 驗證LINE ID
    const line = document.getElementById('line').value.trim();
    if (line.length < 1) {
      document.getElementById('line-error').textContent = '請輸入您的LINE ID';
      return;
    }
    
    // 驗證電話
    const phone = document.getElementById('phone').value.trim();
    const phonePattern = /^[0-9\-\+]{8,15}$/;
    if (!phonePattern.test(phone)) {
      document.getElementById('phone-error').textContent = '請輸入有效的電話號碼';
      return;
    }
    
    // 驗證服務類型
    const service = document.querySelector('input[name="service"]:checked');
    if (!service) {
      document.getElementById('service-error').textContent = '請選擇諮詢服務類型';
      return;
    }
    
    // 驗證隱私權同意
    const privacy = document.getElementById('privacy').checked;
    if (!privacy) {
      document.getElementById('privacy-error').textContent = '請同意隱私權政策';
      return;
    }
    
    // 顯示載入狀態
    submitBtn.disabled = true;
    submitBtn.textContent = '送出中...';
    formStatus.textContent = '';
    formStatus.classList.remove('success', 'error');
    
    // 模擬表單提交
    setTimeout(function() {
      // 模擬成功提交
      submitBtn.disabled = false;
      submitBtn.textContent = '送出預約';
      formStatus.textContent = '預約申請已成功送出，我們將盡快與您聯繫確認詳情。';
      formStatus.classList.add('success');
      
      // 重置表單
      form.reset();
      serviceButtons.forEach(btn => btn.classList.remove('selected'));
    }, 1500);
  });
});
</script>

<style>
.appointment-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 2rem 0;
}

.appointment-header {
  margin-bottom: 2rem;
}

.appointment-form-container {
  background-color: #f8f9fa;
  border-radius: 8px;
  padding: 2rem;
  margin: 2rem 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 600;
}

.form-group input[type="text"],
.form-group input[type="email"],
.form-group input[type="tel"],
.form-group textarea {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #E5E7EB;
  border-radius: 4px;
  font-size: 1rem;
  transition: border-color 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus {
  border-color: #204B6E;
  outline: none;
  box-shadow: 0 0 0 3px rgba(32, 75, 110, 0.1);
}

.form-group small {
  display: block;
  margin-top: 0.25rem;
  color: #6B7280;
  font-size: 0.875rem;
}

.required {
  color: #EF4444;
}

.service-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-bottom: 0.5rem;
}

.service-buttons input[type="radio"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.service-button {
  display: inline-block;
  padding: 0.5rem 1rem;
  background-color: #fff;
  border: 1px solid #E5E7EB;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.service-button:hover {
  background-color: #F3F4F6;
}

.service-button.selected {
  background-color: #204B6E;
  color: white;
  border-color: #204B6E;
}

.privacy-agreement {
  display: flex;
  align-items: flex-start;
}

.privacy-agreement input[type="checkbox"] {
  margin-top: 0.25rem;
  margin-right: 0.5rem;
}

.submit-button {
  display: inline-block;
  padding: 0.75rem 2rem;
  background-color: #204B6E;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.submit-button:hover {
  background-color: #2C5F7F;
}

.submit-button:disabled {
  background-color: #9CA3AF;
  cursor: not-allowed;
}

.error-message {
  color: #EF4444;
  font-size: 0.875rem;
  margin-top: 0.25rem;
  min-height: 1.25rem;
}

.form-status {
  margin-top: 1rem;
  padding: 0.75rem;
  border-radius: 4px;
  font-weight: 500;
}

.form-status.success {
  background-color: #D1FAE5;
  color: #065F46;
}

.form-status.error {
  background-color: #FEE2E2;
  color: #B91C1C;
}

@media (max-width: 768px) {
  .service-buttons {
    flex-direction: column;
  }
  
  .service-button {
    width: 100%;
    text-align: center;
  }
}
</style>
{{ end }}