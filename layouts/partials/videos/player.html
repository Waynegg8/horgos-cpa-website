{{ $youtube_id := .Params.youtube_id }}
{{ $vimeo_id := .Params.vimeo_id }}

<div class="video-player-container">
  {{ if $youtube_id }}
    <div class="video-responsive">
      <iframe 
        src="https://www.youtube.com/embed/{{ $youtube_id }}" 
        title="{{ .Title }}"
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen
        loading="lazy"
        referrerpolicy="strict-origin-when-cross-origin"
        decoding="async">
      </iframe>
    </div>
  {{ else if $vimeo_id }}
    <div class="video-responsive">
      <iframe 
        src="https://player.vimeo.com/video/{{ $vimeo_id }}" 
        title="{{ .Title }}"
        frameborder="0" 
        allow="autoplay; fullscreen; picture-in-picture" 
        allowfullscreen
        loading="lazy"
        referrerpolicy="strict-origin-when-cross-origin"
        decoding="async">
      </iframe>
    </div>
  {{ else }}
    <div class="video-fallback" aria-label="本頁暫無可嵌入影片">
      <div class="video-fallback__media">
        {{ with .Params.thumbnail }}
          <img src="{{ . }}" alt="{{ $.Title }}" loading="lazy" decoding="async" />
        {{ else }}
          <img src="/uploads/images/general/general-default.jpg" alt="{{ $.Title }}" loading="lazy" decoding="async" />
        {{ end }}
      </div>
      <div class="video-fallback__note">本頁目前以圖文說明呈現，影片將於近期上線。</div>
    </div>
  {{ end }}
</div>