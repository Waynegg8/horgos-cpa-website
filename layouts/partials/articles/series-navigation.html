{{ if .Params.series }}
<!-- 系列導航 -->
<div class="series-navigation">
    <div class="series-navigation__header">
        <h3 class="series-navigation__title">{{ .Params.series }} 系列</h3>
        {{ $series := .Params.series }}
        {{ $seriesOrder := .Params.series_order }}
        {{ $category := .Params.category }}
        {{ $seriesPosts := where (where .Site.RegularPages "Params.series" $series) "Params.draft" "!=" true }}
        {{ $seriesCount := len $seriesPosts }}
        <span class="series-navigation__progress">第 {{ $seriesOrder }} / {{ $seriesCount }} 篇</span>
    </div>

    <div class="series-navigation__links">
        {{ if gt $seriesOrder 1 }}
            {{ $prevPost := where (where .Site.RegularPages "Params.series" $series) "Params.series_order" (sub $seriesOrder 1) }}
            {{ with index $prevPost 0 }}
                <a href="{{ .RelPermalink }}" class="btn btn-secondary series-navigation__btn series-navigation__prev" aria-label="上一篇：{{ .Title }}">
                    <i class="fas fa-arrow-left"></i>
                    <span>上一篇</span>
                </a>
            {{ end }}
        {{ end }}

        {{ if lt $seriesOrder $seriesCount }}
            {{ $nextPost := where (where .Site.RegularPages "Params.series" $series) "Params.series_order" (add $seriesOrder 1) }}
            {{ with index $nextPost 0 }}
                <a href="{{ .RelPermalink }}" class="btn btn-secondary series-navigation__btn series-navigation__next" aria-label="下一篇：{{ .Title }}">
                    <span>下一篇</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
            {{ end }}
        {{ end }}
    </div>

    {{ $firstPost := index (where (where .Site.RegularPages "Params.series" $series) "Params.series_order" 1) 0 }}
    {{ with $firstPost }}
    <div class="series-navigation__all">
        <a href="{{ .RelPermalink }}" class="btn btn-primary series-navigation__btn-all">
            <i class="fas fa-list"></i>
            查看完整系列
        </a>
    </div>
    {{ end }}
</div>
{{ else }}
<!-- 非系列文章的導航 -->
<div class="article-navigation">
    <div class="article-navigation__links">
        {{ with .PrevInSection }}
            <a href="{{ .RelPermalink }}" class="article-navigation__prev">
                <i class="fas fa-arrow-left"></i>
                <span>{{ .Title }}</span>
            </a>
        {{ end }}
        
        {{ with .NextInSection }}
            <a href="{{ .RelPermalink }}" class="article-navigation__next">
                <span>{{ .Title }}</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        {{ end }}
    </div>
</div>
{{ end }}