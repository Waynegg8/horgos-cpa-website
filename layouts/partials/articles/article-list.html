<!-- 文章列表頁 -->
<div class="article-list">
    <!-- 搜尋欄 -->
    <div class="article-search">
        <form class="search-form" action="{{ .RelPermalink }}" method="get">
            <input type="text" name="search" placeholder="搜尋文章..." class="form-control" value="{{ with .Params.search }}{{ . }}{{ end }}">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-search"></i>
            </button>
        </form>
    </div>
    
    <!-- 分類篩選 -->
    <div class="category-filters">
        <a href="{{ .RelPermalink }}" class="btn btn-outline-secondary btn-sm {{ if eq .RelPermalink "/articles/" }}active{{ end }}">全部</a>
        <a href="/articles/startup-guide/" class="btn btn-outline-secondary btn-sm {{ if eq .RelPermalink "/articles/startup-guide/" }}active{{ end }}">創業教室</a>
        <a href="/articles/tax-planning/" class="btn btn-outline-secondary btn-sm {{ if eq .RelPermalink "/articles/tax-planning/" }}active{{ end }}">稅務指南</a>
        <a href="/articles/accounting-basics/" class="btn btn-outline-secondary btn-sm {{ if eq .RelPermalink "/articles/accounting-basics/" }}active{{ end }}">會計實務</a>
        <a href="/articles/legal-updates/" class="btn btn-outline-secondary btn-sm {{ if eq .RelPermalink "/articles/legal-updates/" }}active{{ end }}">法規更新</a>
    </div>
    
    <!-- 文章列表 -->
    <div class="article-cards">
        {{ $paginator := .Paginate (where .Pages "Type" "articles") 10 }}
        {{ range $paginator.Pages }}
        <div class="card mb-4">
            <div class="row g-0">
                <div class="col-md-4">
                    {{ with .Params.cover }}
                    <a href="{{ $.RelPermalink }}">
                        <img src="{{ . }}" class="card-img" alt="{{ $.Title }}" loading="lazy">
                    </a>
                    {{ else }}
                    <a href="{{ $.RelPermalink }}">
                        <img src="/uploads/images/general/general-default.jpg" class="card-img" alt="{{ $.Title }}" loading="lazy">
                    </a>
                    {{ end }}
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h2 class="card-title">
                            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                        </h2>
                        <div class="card-meta">
                            <span class="card-meta-item"><i class="fas fa-calendar-alt"></i> {{ .Date.Format "2006-01-02" }}</span>
                            {{ with .Params.category }}
                            <span class="card-meta-item"><i class="fas fa-folder"></i> {{ . }}</span>
                            {{ end }}
                            {{ with .Params.series }}
                            <span class="card-meta-item"><i class="fas fa-bookmark"></i> {{ . }}</span>
                            {{ end }}
                            <span class="card-meta-item"><i class="fas fa-clock"></i> {{ div (countwords .Content) 300 | add 1 }} 分鐘閱讀</span>
                        </div>
                        <p class="card-text">{{ .Summary }}</p>
                        <a href="{{ .RelPermalink }}" class="btn btn-primary">閱讀更多</a>
                    </div>
                </div>
            </div>
        </div>
        {{ end }}
    </div>
    
    <!-- 分頁導航 -->
    {{ template "_internal/pagination.html" . }}
</div>
