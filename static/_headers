# Cloudflare 快取配置
# 靜態資源快取策略

# 靜態資源 - 1年快取
/static/*
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# 字體檔案 - 1年快取
/fonts/*
  Cache-Control: public, max-age=31536000, immutable
  Access-Control-Allow-Origin: *

# 圖片檔案 - 1年快取
/uploads/*
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# CSS 和 JS 檔案 - 1年快取
/assets/*
  Cache-Control: public, max-age=31536000, immutable
  X-Content-Type-Options: nosniff

# HTML 頁面 - 4小時 CDN 快取，1小時瀏覽器快取
/*
  Cache-Control: public, max-age=3600, s-maxage=14400
  X-Content-Type-Options: nosniff
  X-Frame-Options: DENY
  X-XSS-Protection: 1; mode=block
  Strict-Transport-Security: max-age=63072000; includeSubDomains; preload
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=(), payment=()
  Cross-Origin-Opener-Policy: same-origin
  Content-Security-Policy: default-src 'self'; base-uri 'self'; object-src 'none'; frame-ancestors 'none'; upgrade-insecure-requests; img-src 'self' data: https:; script-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://www.google.com https://www.gstatic.com https://www.googletagmanager.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com data:; connect-src 'self' https://www.google.com https://www.gstatic.com; frame-src https://www.youtube.com https://player.vimeo.com https://www.google.com; media-src 'self' https:; worker-src 'self'

# API 響應 - 5分鐘快取
/api/*
  Cache-Control: public, max-age=300, s-maxage=300
  X-Content-Type-Options: nosniff

# 搜尋索引 - 1小時快取
/index.json
  Cache-Control: public, max-age=3600, s-maxage=3600
  Content-Type: application/json

# Sitemap - 1天快取
/sitemap.xml
  Cache-Control: public, max-age=86400, s-maxage=86400
  Content-Type: application/xml

# Robots.txt - 1天快取
/robots.txt
  Cache-Control: public, max-age=86400, s-maxage=86400
  Content-Type: text/plain

# 安全性標頭
/*
  Referrer-Policy: strict-origin-when-cross-origin
  Permissions-Policy: camera=(), microphone=(), geolocation=()