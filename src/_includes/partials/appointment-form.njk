{# src/_includes/partials/appointment-form.njk #}
{#
  線上預約表單的 HTML 結構。
  這個表單的驗證和提交行為由 src/assets/js/appointment.js 控制。
  數據會發送到 site.formspreeUrl。
#}
<form id="appointment-form" action="{{ site.formspreeUrl }}" method="POST" class="bg-white p-8 rounded-lg shadow-lg">
  <h3 class="text-2xl font-heading font-bold text-brand-blue-700 mb-6">填寫預約表單</h3>

  {# 業務類型按鈕 #}
  <div class="mb-6">
    <label class="block text-gray-700 text-lg font-semibold mb-3">您需要的業務類型：<span class="text-red-500">*</span></label>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {% for service in site.services_overview %} {# 假設 services_overview 包含您的服務項目 #}
      <div>
        <input type="radio" id="service-{{ service.id }}" name="business_type" value="{{ service.title }}" class="hidden peer" required>
        <label for="service-{{ service.id }}" class="block p-4 border-2 border-gray-300 rounded-lg cursor-pointer text-gray-800 text-center font-medium
                      peer-checked:bg-brand-blue-100 peer-checked:border-brand-blue-600 peer-checked:text-brand-blue-800
                      hover:border-brand-blue-500 transition-colors duration-200">
          {{ service.title }}
        </label>
      </div>
      {% endfor %}
      {# 其他諮詢選項 #}
      <div>
        <input type="radio" id="service-other" name="business_type" value="其他諮詢" class="hidden peer" required>
        <label for="service-other" class="block p-4 border-2 border-gray-300 rounded-lg cursor-pointer text-gray-800 text-center font-medium
                      peer-checked:bg-brand-blue-100 peer-checked:border-brand-blue-600 peer-checked:text-brand-blue-800
                      hover:border-brand-blue-500 transition-colors duration-200">
          其他諮詢
        </label>
      </div>
    </div>
    <p id="business_type-error" class="text-red-500 text-sm mt-1 hidden">請選擇一種業務類型。</p>
  </div>

  {# 姓名欄位 #}
  <div class="mb-4">
    <label for="name" class="block text-gray-700 text-lg font-semibold mb-2">您的姓名：<span class="text-red-500">*</span></label>
    <input type="text" id="name" name="name" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-blue-500 transition-shadow duration-200" required placeholder="請輸入您的姓名">
    <p id="name-error" class="text-red-500 text-sm mt-1 hidden">姓名為必填項目。</p>
  </div>

  {# 電子郵件欄位 #}
  <div class="mb-4">
    <label for="email" class="block text-gray-700 text-lg font-semibold mb-2">電子郵件：<span class="text-red-500">*</span></label>
    <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-blue-500 transition-shadow duration-200" required placeholder="請輸入您的電子郵件">
    <p id="email-error" class="text-red-500 text-sm mt-1 hidden">請輸入有效的電子郵件地址。</p>
  </div>

  {# 手機號碼欄位 #}
  <div class="mb-4">
    <label for="phone" class="block text-gray-700 text-lg font-semibold mb-2">聯絡電話：<span class="text-red-500">*</span></label>
    <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-blue-500 transition-shadow duration-200" required placeholder="請輸入您的手機號碼 (例如 09XX-XXXXXX)">
    <p id="phone-error" class="text-red-500 text-sm mt-1 hidden">請輸入有效的台灣手機號碼 (09開頭10位數字)。</p>
  </div>

  {# 訊息欄位 #}
  <div class="mb-6">
    <label for="message" class="block text-gray-700 text-lg font-semibold mb-2">您的訊息：</label>
    <textarea id="message" name="message" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-blue-500 transition-shadow duration-200" placeholder="您有什麼想告訴我們的嗎？"></textarea>
  </div>

  {# 隱私政策同意複選框 #}
  <div class="mb-6">
    <input type="checkbox" id="privacy-consent" name="privacy_consent" class="hidden peer" required>
    <label for="privacy-consent" class="flex items-center text-gray-700 text-base cursor-pointer">
      <span class="w-6 h-6 border-2 border-gray-400 rounded-md mr-2 flex items-center justify-center peer-checked:bg-brand-blue-600 peer-checked:border-brand-blue-600 peer-checked:text-white transition-colors duration-200">
        <span class="material-icons text-lg hidden peer-checked:block">check</span>
      </span>
      我已閱讀並同意霍爾果斯會計師事務所的<a href="{{ site.legalLinks[0].url }}" target="_blank" class="text-brand-blue-600 hover:text-brand-blue-800 underline ml-1" aria-label="閱讀隱私權政策">隱私權政策</a>。<span class="text-red-500 ml-1">*</span>
    </label>
    <p id="privacy-consent-error" class="text-red-500 text-sm mt-1 hidden">請勾選同意隱私權政策。</p>
  </div>

  {# 提交按鈕 #}
  <button type="submit" class="w-full bg-brand-blue-700 hover:bg-brand-blue-800 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-brand-blue-500">
    送出預約
  </button>
</form>