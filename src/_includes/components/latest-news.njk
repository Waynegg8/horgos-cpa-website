{# src/_includes/components/latest-news.njk #}
{#
  最新快報/新聞區塊組件。
  接收 `data` 物件，包含 `title`, `description`, `display_count`, `cta_text`, `cta_link`, `background_color`。
  會自動從 `collections.articles` 中篩選最新文章，並以 `card-article.njk` 樣式顯示。
#}
{% if collections.articles and collections.articles.length %}
<section class="py-12 md:py-16 {{ data.background_color or 'bg-white' }}">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl md:text-4xl font-heading font-bold text-center text-brand-blue-700 mb-6">{{ data.title or '最新快報' }}</h2>
    {% if data.description %}
      <p class="text-center text-gray-700 text-lg leading-relaxed max-w-3xl mx-auto mb-10">{{ data.description }}</p>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {# 篩選已發布的最新文章，並限制顯示數量 #}
      {% for article in collections.articles | reverse | slice(0, data.display_count or 3) %}
        {% include "partials/card-article.njk", item: article %} {# 使用現有的文章卡片模板 #}
      {% endfor %}
    </div>

    {% if data.cta_text and data.cta_link %}
    <div class="text-center mt-10">
      <a href="{{ data.cta_link }}" class="inline-block bg-brand-blue-700 hover:bg-brand-blue-800 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md">
        {{ data.cta_text }}
      </a>
    </div>
    {% endif %}
  </div>
</section>
{% endif %}