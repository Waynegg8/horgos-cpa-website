{# src/_includes/components/pricing-card-list.njk #}
{#
  價目表/服務方案卡片組件。
  接收 `data` 變數，它是一個包含服務方案物件的陣列。
  每個卡片包含標題、價格、特色列表、CTA 按鈕，並可選「推薦」標籤。
  符合藍圖的卡片視覺設計。
#}
{% if data and data.length %}
<div class="py-8 md:py-12 bg-gray-50"> {# 可以根據需要調整背景色 #}
  <div class="container mx-auto px-4">
    {% if title %}
      <h2 class="text-3xl md:text-4xl font-heading font-bold text-center text-brand-blue-700 mb-10">{{ title }}</h2>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-stretch"> {# 使用 items-stretch 確保卡片等高 #}
      {% for plan in data %}
      <div class="bg-white rounded-lg shadow-lg flex flex-col relative
                  {% if plan.is_featured %} border-2 border-brand-gold ring-4 ring-brand-gold ring-opacity-20 {% endif %}">
        
        {% if plan.feature_badge %}
        <span class="absolute top-0 right-0 bg-brand-gold text-brand-blue-900 text-xs font-bold uppercase px-3 py-1 rounded-bl-lg rounded-tr-lg">
          {{ plan.feature_badge }}
        </span>
        {% endif %}

        <div class="p-6 pb-0 flex-grow">
          <h3 class="text-2xl font-heading font-bold text-brand-blue-700 mb-3">{{ plan.title }}</h3>
          <p class="text-4xl font-heading font-extrabold text-brand-blue-800 mb-4">{{ plan.price }}</p>
          
          {% if plan.features and plan.features.length %}
          <ul class="space-y-3 text-gray-700 text-base mb-6">
            {% for feature in plan.features %}
              <li class="flex items-center">
                {% if feature.icon %}
                  <span class="material-icons text-green-500 mr-2">check_circle</span> {# 使用綠色勾選圖標 #}
                {% else %}
                  <span class="material-icons text-green-500 mr-2">check</span>
                {% endif %}
                <span>{{ feature.text }}</span>
              </li>
            {% endfor %}
          </ul>
          {% endif %}
        </div>

        {% if plan.button_text and plan.button_link %}
        <div class="p-6 pt-0 mt-auto"> {# 將按鈕推到底部 #}
          <a href="{{ plan.button_link }}" class="block w-full text-center
                      {% if plan.is_featured %} bg-brand-blue-700 hover:bg-brand-blue-800 text-white {% else %} bg-gray-200 hover:bg-gray-300 text-gray-800 {% endif %}
                      font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md hover:shadow-lg">
            {{ plan.button_text }}
          </a>
        </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endif %}