{% extends "layouts/base.njk" %}

{% block content %}
<div class="container mx-auto p-4 md:p-8">
  <h1 class="text-3xl font-bold mb-8">{{ title }}</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    {# The alias is set to 'items' in the front matter #}
    {% for post in items %}
      <a href="{{ post.url }}" class="card" data-track="article:{{ post.data.slug }}">
        {# --- 修改點: 文章列表中的預覽圖 --- #}
        {# 替換原生 img 標籤為 image shortcode #}
        {% if post.data.image %}
          {% image post.data.image, post.data.title, "(min-width: 1024px) 33vw, (min-width: 768px) 50vw, 100vw" %}
        {% endif %}
        <div class="p-4">
          <h2 class="text-xl font-semibold">{{ post.data.title }}</h2>
          <p class="text-gray-600 mt-2">{{ post.data.description | truncate(120) }}</p>
          <p class="text-sm text-gray-500 mt-4">{{ post.date | readableDate }}</p>
        </div>
      </a>
    {% endfor %}
  </div>

  {# 分頁導航 #}
  <nav class="pagination mt-8 flex justify-center space-x-2">
    {% if pagination.href.previous %}
      <a href="{{ pagination.href.previous }}" class="pagination-link">上一頁</a>
    {% endif %}
    {% for page in pagination.pages %}
      <a href="{{ pagination.hrefs[loop.index0] }}" class="pagination-link {% if page.url == page.url %}is-active{% endif %}">{{ loop.index }}</a>
    {% endfor %}
    {% if pagination.href.next %}
      <a href="{{ pagination.href.next }}" class="pagination-link">下一頁</a>
    {% endif %}
  </nav>

</div>
{% endblock %}