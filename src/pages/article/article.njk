---
layout: layouts/base.njk # 繼承基礎佈局
eleventyComputed:
  # 從文章資料中獲取 SEO 相關資訊
  title: "{{ title }} | 霍爾果斯會計師事務所"
  description: "{{ meta_description or excerpt }}"
  image: "{{ thumbnail_image.path }}" # 使用優化後的縮圖作為分享圖片
  permalink: "/article/{{ slug }}/" # 確保 URL 結構正確
  scriptContent: |
    {# 此處可放置文章頁面專用的 JavaScript，例如複製分享連結等 #}
    console.log("Article page loaded: {{ title }}");
---

<main class="container mx-auto px-4 py-8 md:py-12">
  <article class="flex flex-col lg:flex-row gap-8">
    {# 主內容區塊 #}
    <div class="w-full lg:w-3/4">
      <header class="mb-6">
        <h1 class="text-brand-blue-700 text-4xl md:text-5xl font-heading font-extrabold leading-tight mb-4">{{ title }}</h1>
        <p class="text-gray-600 text-lg mb-4">
          發布日期：<time datetime="{{ date }}">{{ date | formatDate }}</time>
          {% if tags and tags.length %}
            <span class="ml-4">
              {% for tag in tags %}
                <span class="inline-block bg-brand-blue-100 text-brand-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded-full mr-2">{{ tag }}</span>
              {% endfor %}
            </span>
          {% endif %}
        </p>
        {% if thumbnail_image.path %}
          <div class="w-full h-auto rounded-lg overflow-hidden shadow-md mb-6">
            {% image thumbnail_image.path, thumbnail_image.alt_text, [1200, 1500], "100vw", "eager", "async", "w-full h-auto object-cover" %}
          </div>
        {% endif %}
      </header>

      <div class="prose max-w-none text-gray-800 leading-relaxed text-lg mb-8">
        {{ body_markdown | markdownify | safe }}
      </div>

      {# 文章結尾 CTA - 這裡假設會從文章資料中獲取 #}
      {% if call_to_action %}
        <div class="bg-brand-blue-50 border-l-4 border-brand-blue-500 p-6 rounded-r-lg shadow-sm my-8">
          <h3 class="text-2xl font-heading font-bold text-brand-blue-700 mb-4">{{ call_to_action.title }}</h3>
          <p class="text-gray-700 mb-4">{{ reassurance_statement }}</p>
          <a href="{{ call_to_action.link }}" class="inline-block bg-brand-blue-700 hover:bg-brand-blue-800 text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md hover:shadow-lg">立即預約諮詢</a>
        </div>
      {% endif %}

      {# 上一篇/下一篇導航 #}
      <nav class="flex justify-between items-center mt-8 pt-4 border-t border-gray-200">
        {% if prev_article %}
          <a href="/article/{{ prev_article.slug }}/" class="flex items-center text-brand-blue-600 hover:text-brand-blue-800 transition duration-200 group">
            <span class="material-icons text-2xl mr-2">arrow_back</span>
            <span class="flex flex-col">
              <span class="text-sm text-gray-500">上一篇</span>
              <span class="font-semibold group-hover:underline">{{ prev_article.title }}</span>
            </span>
          </a>
        {% else %}
          <div></div> {# 保持排版 #}
        {% endif %}

        {% if next_article %}
          <a href="/article/{{ next_article.slug }}/" class="flex items-center text-brand-blue-600 hover:text-brand-blue-800 transition duration-200 group">
            <span class="flex flex-col text-right">
              <span class="text-sm text-gray-500">下一篇</span>
              <span class="font-semibold group-hover:underline">{{ next_article.title }}</span>
            </span>
            <span class="material-icons text-2xl ml-2">arrow_forward</span>
          </a>
        {% else %}
          <div></div> {# 保持排版 #}
        {% endif %}
      </nav>
    </div>

    {# 側邊欄 #}
    <aside class="w-full lg:w-1/4 lg:sticky lg:top-8 self-start">
      {# 分享按鈕 #}
      {% include "partials/share-buttons.njk" %} {# 假設分享按鈕 partial 存在且可動態獲取當前頁面 URL #}

      {# 相關文章/系列推薦 - 根據藍圖，這部分的數據會由 Python 腳本預處理 #}
      {% if related_articles and related_articles.length %}
      <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-heading font-bold text-brand-blue-700 mb-4">相關文章推薦</h3>
        <ul class="space-y-3">
          {% for item in related_articles %}
          <li><a href="{{ item.url }}" class="text-brand-blue-600 hover:text-brand-blue-800 hover:underline text-base">{{ item.title }}</a></li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {# 熱門項目推薦 - 來自 _data/popular.json #}
      {% if popular.items and popular.items.length %}
      <div class="bg-white p-6 rounded-lg shadow-md mb-6">
        <h3 class="text-xl font-heading font-bold text-brand-blue-700 mb-4">熱門項目</h3>
        <ul class="space-y-3">
          {% for item in popular.items %}
          <li><a href="{{ item.url }}" class="text-brand-blue-600 hover:text-brand-blue-800 hover:underline text-base">{{ item.title }}</a></li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {# 預約諮詢按鈕 #}
      <div class="bg-brand-blue-700 text-white p-6 rounded-lg shadow-lg text-center">
        <h3 class="text-xl font-heading font-bold mb-4">需要專業諮詢？</h3>
        <p class="mb-4 text-sm">我們的專業團隊隨時準備為您服務。</p>
        <a href="/appointment/" class="inline-block bg-brand-gold hover:bg-yellow-600 text-brand-blue-900 font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md">立即預約</a>
      </div>
    </aside>
  </article>
</main>