

# 霍爾果斯網站完整需求文件（最終修正版）

## 第1章 專案總體要求與架構

### 1.1 技術框架
- **Hugo版本**：Hugo Extended ≥ 0.147.0，需支援Sass/SCSS編譯、WebP圖片處理、PostCSS功能
- **語言**：繁體中文（zh-tw），所有內容、介面、Front Matter均使用繁體中文
- **編碼**：UTF-8統一編碼
- **主題選擇**：基於Mainroad Hugo主題進行大量視覺客製化，實現蘋果風格設計

### 1.2 內容架構（按導航順序）
網站採用分層內容架構，每個主要分類都包含列表頁和單一內容頁，共10組頁型分組：

#### 1.2.1 首頁內容
- **首頁** (content/_index.md) - 網站入口和概覽

#### 1.2.2 關於我們
- **關於我們** (content/about/_index.md) - 事務所和團隊介紹

#### 1.2.3 服務項目（按導航下拉順序）
- **服務項目概覽** (content/services/_index.md) - 四大核心服務總覽
- **工商登記** (content/services/business-registration/) - 公司設立、變更登記等服務
- **稅務申報** (content/services/tax-filing/) - 各類稅務申報和規劃服務
- **財稅簽證** (content/services/audit-services/) - 財務報表簽證和相關服務
- **諮詢服務** (content/services/consulting/) - 專業諮詢和顧問服務

#### 1.2.4 知識文章（按導航下拉順序）
- **知識文章概覽** (content/articles/_index.md) - 專業會計知識分享
- **創業教室** (content/articles/startup-guide/) - 公司設立、商業登記相關
- **稅務指南** (content/articles/tax-planning/) - 各類稅務申報和規劃
- **會計實務** (content/articles/accounting-basics/) - 日常會計作業和財務管理
- **法規更新** (content/articles/legal-updates/) - 最新法規變動和解讀

#### 1.2.5 影音專區（按導航下拉順序）
- **影音專區概覽** (content/videos/_index.md) - 教學影片和專業講座
- **熱門影片** (content/videos/popular/) - 觀看次數最多的影片
- **教學影片** (content/videos/tutorials/) - step-by-step操作指導
- **案例分享** (content/videos/case-studies/) - 真實案例討論
- **法規解說** (content/videos/legal-explanation/) - 法規條文詳細解釋

#### 1.2.6 常見問題（按導航下拉順序）
- **常見問題概覽** (content/faq/_index.md) - 客戶常見疑問解答
- **創業問題** (content/faq/startup/) - 創業初期常見困難
- **稅務問題** (content/faq/tax/) - 稅務申報相關疑問
- **記帳問題** (content/faq/accounting/) - 日常記帳和會計處理
- **其他問題** (content/faq/others/) - 其他業務相關問題

#### 1.2.7 下載專區（按導航下拉順序）
- **下載專區概覽** (content/downloads/_index.md) - 實用文件和工具
- **範本下載** (content/downloads/templates/) - 各類商業文件範本
- **表格下載** (content/downloads/forms/) - 政府申請表格
- **檢查清單** (content/downloads/checklists/) - 業務處理檢查清單
- **法規文件** (content/downloads/regulations/) - 重要法規文件

#### 1.2.8 聯絡我們
- **聯絡我們** (content/contact/_index.md) - 聯絡資訊、地圖、營業狀態

#### 1.2.9 預約諮詢
- **預約諮詢** (content/appointment/_index.md) - 在線預約系統

#### 1.2.10 法律頁面
- **隱私權政策** (content/privacy-policy.md) - 隱私權說明
- **Cookies政策** (content/cookies-policy.md) - Cookie使用說明

### 1.3 部署與後端架構
- **靜態網站部署**：Cloudflare Pages，建置命令為`hugo --minify -b $CF_PAGES_URL`，輸出目錄為`public`
- **動態功能後端**：Cloudflare Workers處理所有動態功能
  - 討論區功能：使用Disqus實現留言、回覆系統（無需審核機制）
  - 表單處理：預約諮詢表單提交和驗證
  - 營業狀態管理：根據營業時間和國定假日顯示營業狀態
  - 資料存儲：使用Cloudflare KV Storage存儲動態數據
  - API端點：所有API使用/api/*路由
- **API安全**：
  - 採用reCAPTCHA v3驗證
  - IP每日提交限制：每個IP每日5-10次
  - 伺服器檢查Referer和User-Agent，超出頻率回傳錯誤訊息

### 1.4 SEO與效能要求
**PageSpeed Insights目標**：桌面版和行動版均須達到100分，採用漸進式優化確保每個步驟都經過測試驗證

**Core Web Vitals指標**：
- LCP (Largest Contentful Paint) 須小於1.5秒，超越Google標準的2.5秒
- FID (First Input Delay) 須小於50毫秒，超越Google標準的100毫秒
- CLS (Cumulative Layout Shift) 須小於0.05，超越Google標準的0.1
- TTFB (Time to First Byte) 須小於200毫秒

**SEO基礎設施**：
- 自動生成完整sitemap.xml
- 優化robots.txt
- 完整結構化資料標記（Schema.org JSON-LD）
- Open Graph標籤、Twitter Card標籤
- 每組頁型（9組）獨立SEO標題（seo_title）和描述（seo_description），描述可自由插入完整URL(cookies及隱私頁面不需要)

**簡化圖片優化系統**：
- 網站總計約30張圖片，格式限`.webp`、`.jpg`、`.png`，單檔≤2MB
- 採用手動優化方式，一次性轉換為WebP格式，提供桌面版(1200px)、平板版(768px)、手機版(480px)三種響應式尺寸
- 啟用簡化版lazy loading
- 命名規則：分類英文小寫＋連字號＋描述，例如`services-business-registration.webp`

**下載檔案管理**：
- 格式限`.pdf`、`.docx`、`.xlsx`、`.zip`，單檔≤10MB
- 命名規則：分類英文小寫＋連字號＋描述，例如`templates-business-plan.docx`
- 檔案統一存放於`static/uploads/files/`
- 多檔上傳支援拖拉排序，檔案更新只保留最新版，無下載次數統計

### 1.5 內容管理系統
- **系統**：Sveltia CMS（現代化的Decap CMS替代方案），管理介面位於`/admin`
- **驗證方式**：Git Gateway結合GitHub OAuth
- **語言**：英文介面，但管理繁體中文內容
- **管理範圍**：支援所有內容類型的完整管理，包括簡化系列管理和SEO內容編輯
- **部署相容性**：完全兼容Cloudflare Pages環境
- **優勢特色**：比Decap CMS更快（300KB vs 1.5MB）、更現代化的用戶體驗、無痛配置遷移
- **假日設定**：支援手動新增、編輯、刪除假日，欄位包含日期、名稱、類型（國定、補班等）、是否上班（可覆蓋週末預設）

### 1.6 語言策略
專注繁體中文市場深度經營，僅提供繁體中文單一版本，針對台灣法規、稅制、商業習慣進行在地化優化，使用台灣會計準則和稅法規定的專業術語。

## 第2章 簡化系列管理與內容組織

### 2.1 簡化系列管理設計

#### 2.1.1 Front Matter系列標記
採用簡單的Front Matter欄位來標記系列文章：

```yaml
---
title: "公司設立完整指南（上）"
date: "2025-01-01"
description: "文章簡要描述"
category: "startup-guide"
tags: ["創業", "公司設立"]
cover: "/uploads/images/articles/company-setup-guide.webp"
author: "作者姓名"
seo_title: "公司設立完整指南 - 霍爾果斯"
seo_description: "了解公司設立的完整流程，包含詳細步驟與注意事項，立即訪問 https://horgoscpa.com/articles/startup-guide/company-setup/"
series: "startup-guide"
series_order: 1
draft: false
---
```

#### 2.1.2 系列頁面管理
- 不產生獨立的系列列表頁（/series/[series-name]/）
- 系列內容僅用於單篇頁的上一篇/下一篇導航
- **側邊欄設計**：
  - 僅在文章列表頁（/articles/）和單篇頁（/articles/[slug]/）顯示側邊欄
  - 側邊欄顯示當前分類下的系列名稱，點擊跳轉到該系列的第一篇文章（series_order: 1）
  - 單篇頁側邊欄顯示該系列所有文章標題，當前文章高亮顯示

#### 2.1.3 系列導航功能
**智慧型系列導航邏輯**：
```
IF 當前文章屬於系列:
    上一篇/下一篇邏輯:
        1. 優先：同系列的 series_order ± 1
        2. 備選：同分類其他系列的 series_order = 1
        3. 兜底：其他分類系列的 series_order = 1
        → 保證一定有推薦內容，絕不會空白

ELSE (非系列文章):
    按發布日期顯示同分類相鄰文章
    如果推薦到系列文章：只推薦 series_order = 1
```

**實際案例**：
```
當前: "創業指南系列" 第1篇 (創業教室分類)
← 上一篇: "公司登記系列" 第1篇 (創業教室分類)
如無同分類系列: "稅務規劃系列" 第1篇 (稅務指南分類)

當前: "創業指南系列" 第8篇 (創業教室分類)
→ 下一篇: "商業登記系列" 第1篇 (創業教室分類)
如無同分類系列: "會計實務系列" 第1篇 (會計實務分類)
```

**系列進度顯示**：
- 系列進度指示：「創業指南系列 3/8」
- 查看完整系列按鈕：連結到該系列第一篇文章（series_order: 1）

### 2.2 內容導航功能
- **文章內導航**：採用智慧型系列導航邏輯，優先保持系列連續性
- **相關文章推薦**：優先推薦同系列文章，其次推薦同分類及同標籤文章
- **閱讀進度追蹤**：使用localStorage簡單記錄閱讀狀態

## 第3章 視覺系統與介面設計

### 3.1 導航欄設計與實現

#### 3.1.1 導航選單結構
導航欄採用多層結構設計，主選單項目包含：

**首頁**：點擊LOGO返回首頁，LOGO位於導航欄左側顯著位置

**關於我們**：直接連結至關於我們頁面，無下拉選單

**服務項目**（下拉選單設計）：
- 工商登記：公司設立、變更登記等服務
- 稅務申報：各類稅務申報和規劃服務
- 財稅簽證：財務報表簽證和相關服務
- 諮詢服務：專業諮詢和顧問服務

**知識文章**（下拉選單設計）：
- 創業教室：創業相關知識和指導
- 稅務指南：稅務規劃和申報指南
- 會計實務：實用會計知識和技巧
- 法規更新：最新法規變動和解讀

**影音專區**（下拉選單設計）：
- 熱門影片：觀看次數最多的影片
- 教學影片：操作教學和說明影片
- 案例分享：真實案例分析和討論
- 法規解說：法規條文詳細解釋

**常見問題**（下拉選單設計）：
- 創業問題：創業初期常見疑問
- 稅務問題：稅務申報相關問題
- 記帳問題：日常記帳和會計問題
- 其他問題：其他業務相關疑問

**下載專區**（下拉選單設計）：
- 範本下載：各類商業文件範本
- 表格下載：政府申請表格下載
- 檢查清單：業務處理檢查清單
- 法規文件：重要法規條文文件

**聯絡我們**：直接連結至聯絡我們頁面，無下拉選單

**預約諮詢**：直接連結至預約頁面，無下拉選單

#### 3.1.2 導航功能優化實現
**桌面版導航設計**：
- 保持原有多層下拉選單結構，滑鼠懸停觸發時機設定為0.3秒延遲，避免意外觸發
- 下拉選單採用淡入動畫效果，動畫時間0.3秒，使用ease-in-out緩動函數
- 下拉選單背景為半透明深色，確保與頁面內容有良好對比

**行動版導航設計**：
- **全屏選單系統**：點擊漢堡選單按鈕時，選單從右側滑入展開至全屏，背景添加半透明遮罩
- **滑入動畫效果**：選單面板從螢幕右側滑入，動畫時間0.4秒，使用ease-out緩動
- **手風琴式展開**：主選單項目採用手風琴式設計，點擊主項目時子選單向下展開，再次點擊時收合
- **多重關閉機制**：可透過點擊遮罩區域、點擊關閉按鈕或滑動手勢來收合選單

**互動優化細節**：
- 觸控友善的按鈕設計，所有可點擊元素最小尺寸為44px x 44px，符合觸控操作標準
- 展開收合狀態採用視覺化指示，使用箭頭圖示表示可展開狀態，展開後箭頭旋轉180度
- 所有動畫過渡效果採用統一的緩動函數，確保視覺體驗的一致性

### 3.2 Footer詳細設計規範

#### 3.2.1 Footer整體架構
Footer採用深色設計，背景色與導航欄一致（#204B6E），文字使用白色確保良好對比。整體採用響應式網格布局，在不同螢幕尺寸下展現不同的區域排列方式。

#### 3.2.2 Footer五大功能區域
**LOGO與SEO區域**：
- **LOGO展示**：公司LOGO置於顯著位置，點擊可返回首頁，LOGO下方預留SEO文字展示區域
- **SEO文字區塊**：此區域專門用於SEO優化文字，內容可透過Sveltia CMS後台管理系統進行編輯和更新。文字內容應包含公司核心業務關鍵字、服務特色描述，並可在文字中插入內部頁面連結。文字樣式採用較小的說明文字格式，行距適中確保可讀性。

**公司資訊區域**：所有項目都需要FontAwesome圖示
- **詳細聯絡資訊**：完整公司地址，包含郵遞區號和詳細街道資訊；電話號碼採用可點擊設計，使用tel:協議支援一鍵撥號功能；電子郵件地址採用可點擊設計，使用mailto:協議支援一鍵寫信功能；營業時間清楚標示，包含平日和例假日的營業時段
- **簡化營業狀態顯示**：在聯絡資訊下方顯示「●營業中」或「●休息中」的即時狀態，使用JavaScript定時更新，考慮台北時區和國定假日
- **社群媒體連結**：Facebook粉絲專頁連結，使用Facebook品牌藍色圖示；LINE官方帳號連結，使用LINE品牌綠色圖示；Instagram企業帳號連結，使用Instagram漸層色圖示；所有社群圖示使用FontAwesome圖示庫，確保風格一致；圖示具備懸停動畫效果，懸停時輕微放大並增加亮度

**服務項目區域**：所有項目都需要FontAwesome圖示
- **服務項目標題**：使用「服務項目」作為區域標題
- **四大核心服務連結**：工商登記、稅務申報、財稅簽證、諮詢服務，所有連結採用垂直排列，具備懸停底線效果，點擊連結至對應的服務項目子頁面

**快速連結區域**：所有項目都需要FontAwesome圖示
- **快速連結標題**：使用「快速連結」作為區域標題
- **主要頁面快速連結**：關於我們、知識文章、影音專區、下載專區、聯絡我們、預約諮詢，連結名稱與主導航選單保持一致，採用垂直排列設計，具備懸停視覺效果

**底部法律聲明區域**：所有項目都需要FontAwesome圖示
- **區域位置**：位於Footer最底部，橫跨整個Footer寬度
- **背景設計**：使用比主Footer更深的色調，形成視覺層次
- **左側版權聲明**：顯示「© 2024 霍爾果斯會計師事務所 版權所有」，年份使用JavaScript自動獲取當前年份並更新
- **右側法律連結**：隱私權政策、Cookies政策，連結間使用直線分隔符號（|）進行視覺分隔

#### 3.2.3 Footer響應式設計實現
**桌面版設計**（螢幕寬度≥1025px）：
- 採用五區域水平排列設計，使用CSS Grid布局系統，網格比例設定為2fr 2fr 1.5fr 1.5fr 1fr，確保各區域寬度分配合理
- LOGO和SEO區域佔用較多空間，服務項目和快速連結區域寬度適中，保持整體視覺平衡

**平板版設計**（螢幕寬度641px-1024px）：
- 採用三區域合併設計：第一區域為LOGO展示結合SEO文字內容；第二區域為公司聯絡資訊結合社群媒體連結；第三區域為服務項目和快速連結採用雙欄並排顯示；底部法律聲明維持全寬度顯示

**行動版設計**（螢幕寬度≤640px）：
- 採用完全垂直堆疊設計：LOGO區域採用置中對齊；公司資訊區域設計為可摺疊展開，預設收合狀態；服務項目區域設計為可摺疊展開，預設收合狀態；快速連結區域設計為可摺疊展開，預設收合狀態；社群連結採用水平圖示排列，置中對齊；法律聲明維持全寬度顯示，文字大小適當縮小

### 3.3 蘋果風格視覺系統（基於Mainroad客製化）

#### 3.3.1 色彩系統設計 (深色主題修正案)

**背景色彩系統**:
- 主背景 (bg-primary): #0A0A0A (近乎純黑，用於頁面 body)
- 次要背景 (bg-secondary): #141414 (深灰色，用於卡片、容器等元素)

**文字色彩階層**:
- 主要文字 (text-primary): #F0F0F0 (高對比米白色，用於標題和主要內文)
- 次要文字 (text-secondary): #A1A1A1 (中灰色，用於描述和輔助資訊)
- 淡化文字 (text-tertiary): #525252 (深灰色，用於不重要的標籤或註釋)

**邊框和分隔色彩**:
- 主要邊框 (border-primary): #262626 (低調的深灰色，用於元件邊框)

**主要色彩定義 (維持不變)**:
- 主色調 (accent-primary): #204B6E (深藍色，用於主要按鈕)
- 強調色彩 (accent-highlight): #22c55e (綠色，用於次要 CTA 按鈕和重要提示)

**狀態指示色彩 (維持不變)**:
- 成功狀態: #10B981
- 警告狀態: #F59E0B
- 錯誤狀態: #EF4444
- 資訊狀態: #3B82F6

#### 3.3.2 字體系統設計
**字體棧定義**：採用Inter, Noto Sans TC, 系統字體的字體棧，確保在各種環境下都有良好的中英文顯示效果

**字體大小階層**：
- H1標題：2.5rem (40px)，用於頁面主標題
- H2標題：2rem (32px)，用於主要章節標題
- H3標題：1.5rem (24px)，用於子章節標題
- H4標題：1.25rem (20px)，用於小標題
- 標準內文：1rem (16px)，用於正文內容
- 輔助資訊：0.875rem (14px)，用於次要資訊

**行高和間距**：所有文字採用1.6倍行高，確保良好的閱讀體驗。段落間距使用1.5rem，標題下方間距使用1rem。

#### 3.3.3 響應式設計系統
**四斷點響應式系統**：
- 手機版：螢幕寬度最大640px
- 平板版：螢幕寬度641px至1024px
- 桌面版：螢幕寬度1025px至1440px
- 寬螢幕版：螢幕寬度最小1441px

**響應式設計原則**：採用行動優先的設計方法，先設計手機版介面，再向上擴展至更大螢幕。所有組件都具備完整的響應式適應能力。

#### 3.3.4 動畫效果系統
**標準動畫時間**：
- 快速動畫：0.2秒，用於按鈕懸停等即時回饋
- 標準動畫：0.3秒，用於大部分過渡效果
- 慢速動畫：0.4秒，用於頁面載入和複雜動畫

**動畫緩動函數**：
- ease-in-out：用於大部分過渡動畫
- ease-out：用於進入動畫
- ease-in：用於退出動畫

**核心動畫效果**：
- 導航選單滑入展開動畫
- 卡片懸停向上位移效果
- 頁面元素進入時的向上滑入淡入效果
- 階梯延遲動畫，多個元素依序出現

#### 3.3.5 客製化實現策略
**覆蓋式SCSS架構**：
```scss
// assets/scss/
├── base/
│   ├── _reset.scss        // 重置樣式
│   ├── _typography.scss   // 字體樣式
│   └── _accessibility.scss // 無障礙樣式
├── components/
│   ├── _buttons.scss      // 按鈕樣式
│   ├── _cards.scss        // 卡片樣式
│   ├── _forms.scss        // 表單樣式
│   ├── _search.scss       // 搜尋樣式
│   ├── _toc.scss          // 目錄樣式
│   └── _loading.scss      // 載入動畫
├── layouts/
│   ├── _navigation.scss   // 導航樣式
│   ├── _footer.scss       // 頁腳樣式
│   └── _layout.scss       // 版面調整
├── pages/
│   ├── _contact.scss      // 聯絡頁面
│   ├── _services.scss     // 服務頁面
│   └── _articles.scss     // 文章頁面
├── utils/
│   ├── _variables.scss    // 色彩、字型、間距變數
│   ├── _mixins.scss       // SCSS混合
│   └── _functions.scss    // SCSS函數
└── main.scss              // 整合所有樣式
```

**CTA按鈕統一設計規範**：
- **主要CTA按鈕**：「立即預約諮詢」，使用主色調深藍色背景配白色文字
- **次要CTA按鈕**：「加入Line諮詢」，使用LINE品牌綠色背景(#00B900)配白色文字

## 第4章 頁面功能與用戶體驗

### 4.1 首頁功能設計

#### 4.1.1 Hero輪播區設計
**輪播核心功能**：
- 支援多張圖片輪播展示，每張圖片可設定獨立的背景圖片和內容
- 輪播控制包含左右箭頭按鈕，位於輪播區域兩側，點擊可手動切換
- 底部設置圓點導航指示器，顯示當前圖片位置和總數量，點擊可跳轉
- 每張圖片必須透過CMS設定跳轉URL，連結至單獨頁面

**自動播放機制**：
- 每5秒自動切換至下一張圖片
- 滑鼠懸停時暫停自動播放，移開後恢復
- 行動裝置支援觸控滑動操作

**圖片規格要求**：
- 統一使用WebP格式，單檔≤2MB
- 提供桌面版(1200px)、平板版(768px)、手機版(480px)三種尺寸
- 啟用簡單延遲載入技術

#### 4.1.2 創業專區展示
- 以卡片形式展示創業資訊和資源
- 每個卡片包含標題、簡要描述、FontAwesome圖示
- 桌面版顯示多欄布局，行動版調整為單欄堆疊
- 卡片可點擊，連結至相關文章、下載表單或服務介紹
- 懸停時向上位移4像素並增加陰影

#### 4.1.3 服務項目卡片展示
- 展示四大核心服務，每個服務採用獨立卡片設計：
  - **工商登記**：公司設立、變更登記等
  - **稅務申報**：各類稅務申報和規劃
  - **財稅簽證**：財務報表簽證等
  - **諮詢服務**：專業諮詢和顧問服務
- 卡片包含標題、描述、FontAwesome圖示，點擊連結至詳細頁面
- 懸停放大效果

#### 4.1.4 雙CTA行動呼籲區域
- 頁面底部設置「立即預約諮詢」主要按鈕和「立即加入Line好友」次要按鈕

### 4.2 知識文章功能設計

#### 4.2.1 文章列表頁設計
**頁面頂部搜尋設計**：
```
[頁面標題]
[搜尋欄] ← 位於主內容區
[分類篩選]
[內容列表...]
[分頁導航]
```

**搜尋功能實現**：
- 使用Fuse.js實現前端即時搜尋，僅搜尋本分類（文章）內容
- 輸入2個或更多字符時開始搜尋，結果即時顯示，關鍵字高亮
- 無全站搜尋功能

**文章卡片展示**：
- 每篇文章一行一個卡片，包含：
  - 特色圖片（WebP，延遲載入）
  - 文章標題（點擊進入文章）
  - 發布日期
  - 分類標籤（點擊篩選同類文章）
  - 系列標籤（如適用）
  - 文章摘要
  - 標籤列表
  - 閱讀時間估算

**分頁系統設計**：
- 每頁顯示10篇文章
- 底部提供頁碼、上一頁、下一頁、首頁、末頁導航

**分類篩選功能**：
- 支援按分類和系列篩選
- 點擊標籤過濾同類文章

#### 4.2.2 文章列表側邊欄功能
- **分類列表**：顯示所有文章分類及文章數量，點擊過濾
- **系列列表**：顯示當前分類下的系列名稱，點擊跳轉到系列第一篇
- **最新文章**：顯示前5篇最新文章
- **標籤雲**：標籤大小反映使用頻率，點擊篩選相關文章
- **注意**：側邊欄無搜尋功能

#### 4.2.3 單篇文章頁面設計
**文章標頭資訊區**：
- 標題（H1）
- 發布日期
- 分類連結
- 系列連結（如適用）
- 標籤列表
- 作者資訊
- 閱讀時間估算

**自動目錄功能**：
- 側邊欄自動生成H2和H3標題目錄
- 支援sticky定位，隨頁面滾動固定
- 點擊跳轉至對應章節，平滑滾動
- 自動高亮當前閱讀位置
- 僅桌面版顯示（螢幕寬度≥1025px）

**側邊欄搜尋功能**：
- 位於側邊欄最上方，包含搜尋按鈕
- 搜尋範圍為所有文章，輸入2個字符後開始搜尋
- 點擊搜尋按鈕跳轉至/articles/?search=關鍵字

**閱讀進度條**：
- 頁面頂部顯示細線進度條，使用主色調，隨滾動更新

**文章內容渲染**：
- 支援完整Markdown語法
- 代碼區塊語法高亮
- 圖片延遲載入，響應式顯示
- 表格支援水平滾動
- 支援嵌入YouTube/Vimeo影片

**智慧型系列導航**：採用三層優先級邏輯

**社群分享功能**：
- 提供Facebook、LINE、Email一鍵分享
- 支援複製文章網址

**雙CTA行動呼籲**：按標準實現

**簡化討論區功能**：
- 使用Disqus實現留言和樹狀回覆，無審核機制
- 留言採用暱稱制，無需會員系統

**相關文章推薦**：
- 優先推薦同系列文章
- 次之推薦同分類及同標籤文章

### 4.3 影音專區功能設計

#### 4.3.1 影片列表頁設計
**頁面頂部搜尋設計**：
```
[頁面標題]
[搜尋欄] ← 位於主內容區
[分類篩選]
[內容列表...]
[分頁導航]
```

**搜尋功能**：
- 使用Fuse.js搜尋影片標題和描述，僅搜尋本分類（影片）內容
- 輸入2個字符後開始搜尋，關鍵字高亮

**影片卡片展示**：
- 一行一個卡片，包含：
  - YouTube/Vimeo縮圖（WebP，自動擷取）
  - 影片時長
  - 標題
  - 發布日期
  - 分類標籤
  - 系列標籤（如適用）
  - 描述摘要

**分頁設置**：每頁10部影片，完整分頁導航

**分類篩選**：支援按分類和系列篩選

#### 4.3.2 影片列表側邊欄功能
- 分類列表、系列列表（當前分類，點擊跳轉系列第一篇）、最新影片（前5部）
- 無搜尋功能

#### 4.3.3 單一影片頁面設計
**影片標頭資訊**：
- 標題、發布日期、分類連結、系列連結、標籤列表

**YouTube/Vimeo嵌入播放器**：
- 16:9響應式比例，支援延遲載入

**影片描述內容**：
- 支援Markdown格式，包含時間戳連結功能

**側邊欄搜尋**：
- 搜尋範圍為所有影片，點擊搜尋按鈕跳轉至/videos/?search=關鍵字

**雙CTA區域**：按標準實現

**簡化討論區功能**：使用Disqus實現

**智慧型系列導航**：採用三層優先級邏輯

**相關影片推薦**：
- 優先同系列影片
- 次之同分類影片

### 4.4 常見問題功能設計

#### 4.4.1 FAQ列表頁設計
**頁面頂部搜尋設計**：
```
[頁面標題]
[搜尋欄] ← 位於主內容區
[分類篩選]
[內容列表...]
[分頁導航]
```

**搜尋功能**：
- 搜尋問題標題和答案內容，僅搜尋本分類（FAQ）
- 使用Fuse.js實現即時搜尋

**問題卡片展示**：
- 一行一個卡片，包含問題標題、分類、系列標籤（如適用）、發布日期、標籤

**分頁設置**：每頁10個問題

**分類篩選**：支援按分類和系列篩選

#### 4.4.2 FAQ列表側邊欄功能
- 分類列表、系列列表（當前分類，點擊跳轉系列第一篇）、最新問題（前5個）
- 無搜尋功能

#### 4.4.3 單一問題頁面設計
**問題標頭資訊**：
- 問題標題、發布日期、分類連結、系列連結、標籤列表

**答案內容**：
- 支援Markdown渲染，包含圖片、連結、代碼區塊

**側邊欄搜尋**：
- 搜尋範圍為所有FAQ，點擊搜尋按鈕跳轉至/faq/?search=關鍵字

**雙CTA區域**：按標準實現

**簡化討論區功能**：使用Disqus實現

**智慧型系列導航**：採用三層優先級邏輯

**相關問題推薦**：
- 同分類及同標籤問題

### 4.5 下載專區功能設計

#### 4.5.1 下載列表頁設計
**頁面頂部搜尋設計**：
```
[頁面標題]
[搜尋欄] ← 位於主內容區
[分類篩選]
[內容列表...]
[分頁導航]
```

**搜尋功能**：
- 搜尋檔案名稱和描述，僅搜尋本分類（下載資源）

**下載卡片展示**：
- 一行一個卡片，包含：
  - 檔案類型圖示（Excel、PDF、Word、ZIP）
  - 檔案名稱
  - 簡短描述
  - 檔案大小
  - 發布日期
  - 最後更新日期
  - 分類和系列標籤
  - 下載按鈕（跳轉至詳細頁面）

**分頁設置**：每頁10個項目

**多重篩選**：按分類、系列、檔案類型篩選

#### 4.5.2 下載列表側邊欄功能
- 分類列表、系列列表（當前分類，點擊跳轉系列第一篇）、檔案類型篩選器、最新上傳檔案（前5個）
- 無搜尋功能

#### 4.5.3 單一資源頁面設計
**資源標頭資訊**：
- 標題、檔案類型和大小、發布日期、更新日期、分類連結、系列連結、標籤列表

**資源描述內容**：
- 支援Markdown格式，包含使用說明、注意事項、相關連結

**下載功能實現**：
- 提供主要下載按鈕和備用下載連結

**側邊欄搜尋**：
- 搜尋範圍為所有下載資源，點擊搜尋按鈕跳轉至/downloads/?search=關鍵字

**簡化討論區功能**：使用Disqus實現

**智慧型系列導航**：採用三層優先級邏輯

**相關資源推薦**：
- 同分類及同標籤資源

### 4.6 服務項目功能設計

#### 4.6.1 服務概覽頁設計
**四大服務卡片展示**：
- 工商登記、稅務申報、財稅簽證、諮詢服務
- 每個卡片包含標題、描述、FontAwesome圖示，點擊連結至詳細頁面

#### 4.6.2 單一服務詳細頁設計
- **服務詳情**：服務標題、概述、詳細說明、優勢和特色
- **服務流程**：步驟化流程說明，可包含流程圖
- **服務內容清單**：具體項目、交付成果、服務保障
- **相關資源連結**：連結至知識文章、下載資源、FAQ
- **雙CTA區域**：按標準實現

### 4.7 關於我們頁面設計

#### 4.7.1 事務所介紹區域
- 包含發展歷程、經營理念、服務宗旨、專業認證
- 圖片內容：辦公環境、團隊合照、證書展示（WebP格式）

#### 4.7.2 團隊介紹區域
- 每位成員包含照片、姓名職位、背景介紹、學經歷、證照、專長
- 左右交錯排列，奇數左圖右文，偶數右圖左文

#### 4.7.3 專業實力展示
- 展示服務年資、客戶數量、成功案例數量、專業認證數量

### 4.8 聯絡我們頁面設計

#### 4.8.1 聯絡資訊卡片區域
**基本資訊 2x2 卡片設計**：所有項目都需要FontAwesome圖示
```
[電話號碼]     [LINE官方帳號]
[公司地址]     [營業狀態顯示]
```

**卡片內容詳細**：
- **電話號碼**：支援tel:協議，包含代表號和專線
- **LINE官方帳號**：點擊開啟LINE對話
- **公司地址**：包含郵遞區號、縣市、街道
- **營業狀態**：顯示「營業中」或「休息中」，包含營業時間和下次營業提示

#### 4.8.2 地圖顯示區域
- Google Maps嵌入，標記事務所位置
- 響應式比例，直接載入

#### 4.8.3 交通資訊區域
- 大眾運輸：捷運、公車路線及步行指引
- 開車路線：主要道路和交流道指引
- 停車資訊：附近停車場位置、收費標準
- 附近地標：周邊重要地標

#### 4.8.4 營業狀態動態功能
- **台北時區**：使用Intl.DateTimeFormat處理Asia/Taipei
- **營業時間**：週一至週五 08:30–12:30、13:30–17:30，週末休息
- **國定假日**：從Cloudflare KV Storage讀取假日資料
- **狀態更新**：JavaScript每分鐘更新

#### 4.8.5 頁面底部功能
- 雙CTA按鈕：立即預約諮詢、加入Line諮詢

#### 4.8.6 響應式布局設計
**桌面版布局**：
```
[電話    |LINE]      [Google Map]
[地址    |營業狀態]    [         ]
[     交通資訊 (全寬)     ]
[     雙CTA按鈕      ]
```

**行動版布局**：
```
[電話    |LINE]
[地址    |營業狀態]
[Google Map]
[交通資訊]
[雙CTA按鈕]
```

### 4.9 預約諮詢頁面設計

#### 4.9.1 預約表單設計
**表單欄位配置**：
- 姓名：必填，2-20字
- 電子郵件：必填，格式驗證
- LINE ID：必填，無格式驗證
- 聯絡電話：必填，支援台灣手機和市話格式
- 諮詢服務類型：必填，按鈕選擇（工商登記、稅務申報、財稅簽證、諮詢服務、其他）
- 諮詢內容：選填，多行文字輸入
- 隱私權政策同意：必填勾選，整合reCAPTCHA v3

**按鈕選擇設計**：
- 五個服務類型按鈕水平排列，行動版自動換行
- 選中時有視覺回饋，一次只能選一個

**表單驗證**：
- 前端即時驗證+後端安全驗證
- 整合reCAPTCHA v3反垃圾郵件保護
- 提交時顯示載入狀態，完成後顯示成功/失敗訊息

**後端處理**：
- 使用Cloudflare Workers處理提交
- 自動發送確認郵件給客戶和管理員
- 資料存儲至Cloudflare KV Storage

#### 4.9.2 提交按鈕狀態設計
- 正常：「送出預約」
- 載入：「送出中...」+轉圈動畫
- 完成：顯示成功/錯誤訊息

#### 4.9.3 預約注意事項說明
- 包含諮詢流程、注意事項、取消政策

### 4.10 隱私權政策與Cookies政策頁面設計
**隱私權政策頁面**：
- 涵蓋資料蒐集範圍、使用目的、保護措施、用戶權利、政策變更通知

**Cookies政策頁面**：
- 說明Cookie類型（必要、分析、效能、功能）
- 提供Cookie管理指導
- 頁面載入時顯示Cookie同意條款提示

**Google Analytics（GA4）**：
- 嵌入GA4進行流量分析

### 4.11 載入狀態統一設計系統

#### 4.11.1 載入狀態檔案需求
- **載入腳本** (assets/js/components/loading.js)
- **載入樣式** (assets/scss/components/_loading.scss)

#### 4.11.2 多層次載入狀態設計
- **頁面載入進度條**：3像素高，主色調到強調色漸層
- **表單提交載入**：按鈕半透明+旋轉動畫
- **內容載入骨架屏**：模擬標題、文字、圖片結構
- **圖片漸進式載入**：先顯示模糊效果，載入後過渡清晰

#### 4.11.3 載入動畫設計細節
- **旋轉動畫**：360度旋轉，1秒循環
- **骨架屏動畫**：光波掃過效果，1.5秒
- **進度條動畫**：寬度0-100%，ease-out緩動
- **淡入淡出動畫**：透明度和濾鏡組合

## 第5章 前端互動功能

### 5.1 搜尋功能技術實現（Fuse.js方案）

#### 5.1.1 搜尋功能檔案需求
- **搜尋索引模板** (layouts/index.json)
- **搜尋管理器腳本** (assets/js/components/search.js)
- **搜尋樣式檔案** (assets/scss/components/_search.scss)

#### 5.1.2 Fuse.js搜尋系統實現
**搜尋配置優化**：
```javascript
const fuse = new Fuse(searchData, {
  keys: ['title', 'content', 'tags'],
  threshold: 0.3,
  ignoreLocation: true,
  includeMatches: true,
  includeScore: true
});
```

**搜尋範圍**：
- 文章列表頁：僅搜尋所有文章
- 影片列表頁：僅搜尋所有影片
- FAQ列表頁：僅搜尋所有FAQ
- 下載列表頁：僅搜尋所有下載資源
- 單一頁面側邊欄：搜尋對應類型所有內容

**前端搜尋功能**：
- 支援中文分詞和模糊匹配
- 輸入2個字符後即時搜尋
- 結果按相關性排序，限制前10個結果

#### 5.1.3 搜尋UI設計特色
**列表頁面搜尋框**：
- 位於主內容區頂部，無搜尋按鈕
- 輸入過程中實時顯示建議
- 結果以下拉列表顯示，包含標題、摘要、分類
- 關鍵字高亮

**單一頁面側邊欄搜尋框**：
- 位於側邊欄最上方，包含搜尋按鈕
- 點擊按鈕跳轉至對應列表頁（/articles/?search=關鍵字等）
- 空狀態顯示友善提示

**通用UI特色**：
- 支援上下箭頭鍵選擇結果，Enter鍵確認，Escape鍵關閉

### 5.2 目錄功能完整實現

#### 5.2.1 自動目錄檔案需求
- **目錄模板** (layouts/partials/sidebar/table-of-contents.html)
- **目錄生成腳本** (assets/js/components/toc.js)
- **目錄樣式** (assets/scss/components/_toc.scss)

#### 5.2.2 目錄功能詳細實現
- **標題提取**：自動掃描H2和H3標題
- **錨點生成**：為標題生成唯一ID，支援中文URL轉換
- **Sticky定位**：目錄固定在側邊欄頂部，距離20像素
- **點擊跳轉**：平滑滾動至對應章節
- **當前位置高亮**：使用主色調和加粗字體
- **響應式設計**：僅桌面版顯示（≥1025px）

### 5.3 無障礙設計與鍵盤導航

#### 5.3.1 無障礙設計檔案需求
- **跳過連結模板** (layouts/partials/skip-links.html)
- **ARIA標籤模板** (layouts/partials/aria-labels.html)
- **鍵盤導航腳本** (assets/js/components/keyboard-nav.js)
- **無障礙樣式** (assets/scss/base/_accessibility.scss)

#### 5.3.2 WCAG 2.1 AA標準實施
- **語義化HTML**：使用header、nav、main、aside、footer
- **標題層級**：嚴格遵循H1→H2→H3
- **表單標籤**：輸入框與label使用for和id關聯
- **鍵盤導航**：所有功能可純鍵盤操作，焦點指示器清晰
- **螢幕閱讀器**：使用ARIA標籤，動態內容使用aria-live
- **色彩對比度**：
  - 主要文字：8.9:1
  - 次要文字：4.6:1
  - 主色調與白色：5.2:1
  - 互動元素≥4.5:1

## 第6章 後端動態功能

### 6.1 Cloudflare Workers後端架構

#### 6.1.1 動態功能檔案需求
- **Workers主檔案** (workers/src/index.js)
- **留言處理器** (workers/src/handlers/comments.js)
- **表單處理器** (workers/src/handlers/appointments.js)
- **營業狀態處理器** (workers/src/handlers/business-status.js)
- **資料驗證工具** (workers/src/utils/validation.js)
- **郵件發送工具** (workers/src/utils/email.js)
- **資料存儲工具** (workers/src/utils/storage.js)
- **前端組件**：
  - 討論區模板 (layouts/partials/comments.html)
  - 營業狀態模板 (layouts/partials/business-status.html)
  - 表單處理腳本 (assets/js/components/forms.js)

#### 6.1.2 API端點設計
- **留言相關API**：
  - POST /api/comments：新增留言（Disqus整合）
  - GET /api/comments/:page_id：獲取頁面留言
  - POST /api/comments/:comment_id/reply：回覆留言
- **表單處理API**：
  - POST /api/forms/appointment：處理預約表單
- **營業狀態API**：
  - GET /api/business-status：獲取當前狀態
  - POST /api/admin/holidays：管理假日設定
- **安全機制**：
  - reCAPTCHA v3驗證
  - 每個IP每日5-10次請求限制
  - 檢查Referer和User-Agent
  - 超出頻率回傳錯誤訊息

#### 6.1.3 資料存儲結構設計
- **KV Storage**：
  - comments：按頁面ID組織留言
  - holidays：按年份組織假日
  - appointments：儲存表單資料
  - settings：系統設定
- **留言資料**：唯一ID、暱稱、LINE ID（不公開）、內容、時間戳、parent_id
- **假日資料**：日期、名稱、類型、是否上班
- **預約資料**：客戶資訊、服務類型、內容、提交時間、狀態

### 6.2 表單處理與reCAPTCHA系統

#### 6.2.1 reCAPTCHA v3配置
- **前端**：載入reCAPTCHA v3腳本，根據表單類型使用不同action
- **後端**：分數閾值0.5，低分需數學驗證
- **錯誤處理**：失敗時啟用後備驗證
- **隱私說明**：表單附近說明reCAPTCHA用途

#### 6.2.2 表單處理系統
- **預約表單**：
  - 前端和後端雙重驗證
  - 自動發送確認和管理員通知郵件
  - 資料存儲至KV Storage
- **留言表單**：
  - 內容檢查過濾垃圾
  - 無審核直接發布
  - 包含時間戳和IP記錄

#### 6.2.3 郵件系統整合
- **SMTP**：使用Cloudflare Email Workers
- **範本**：
  - 預約確認信：包含預約編號和流程
  - 管理員通知信：包含提交資料
  - 自動回覆信：感謝提交和聯絡方式
- **追蹤**：監控郵件送達狀態

### 6.3 簡化討論區前端功能實現

#### 6.3.1 留言表單設計
- **欄位**：
  - 暱稱（必填）
  - LINE ID（必填，不公開）
  - 留言內容（選填，支援Markdown）
  - reCAPTCHA v3驗證
- **驗證**：前端+後端雙重驗證
- **狀態**：顯示載入、成功/錯誤訊息

#### 6.3.2 留言顯示功能
- 顯示暱稱、相對時間、Markdown渲染內容
- 支援多層回覆，縮排顯示
- 按時間順序排序

#### 6.3.3 討論區適用範圍
- 包含：單一文章、影片、FAQ、下載頁面
- 不包含：列表頁、服務項目、靜態頁面

### 6.4 營業狀態管理系統

#### 6.4.1 營業狀態時區處理
- **台北時區**：使用Intl.DateTimeFormat
- **營業時間**：週一至週五 08:30–12:30、13:30–17:30，週末休息
- **國定假日**：從KV Storage讀取
- **更新**：每分鐘檢查

#### 6.4.2 營業狀態顯示位置
- **聯絡我們頁面**：詳細狀態、營業時間、下次狀態變更
- **Footer**：簡化「●營業中」或「●休息中」

#### 6.4.3 營業狀態管理後台
- **後台**：Cloudflare Workers實現
- **功能**：新增、編輯、刪除假日（日期、名稱、類型、是否上班）
- **路由**：
  - /admin/business-status：管理首頁
  - /admin/business-status/holidays：假日管理

## 第7章 內容管理與SEO

### 7.1 Sveltia CMS詳細配置

#### 7.1.1 CMS管理檔案需求
- **主配置** (static/admin/config.yml)
- **管理介面** (static/admin/index.html)

#### 7.1.2 基本系統設定
- **後端**：Git Gateway+GitHub OAuth
- **媒體管理**：儲存於`static/uploads`
- **介面**：英文，管理繁體中文
- **編輯器**：支援富文本和Markdown
- **部署**：兼容Cloudflare Pages

#### 7.1.3 內容集合配置詳細
- **知識文章**：
  - 資料夾：content/articles
  - 欄位：標題、日期、描述、分類、標籤、封面、作者、SEO標題、SEO描述、series、series_order、draft
- **影音專區**：
  - 資料夾：content/videos
  - 欄位：標題、YouTube/Vimeo ID、日期、描述、分類、縮圖、時長、series、series_order、SEO標題、SEO描述
- **常見問題**：
  - 資料夾：content/faq
  - 欄位：問題標題、答案、日期、分類、標籤、series、series_order、SEO標題、SEO描述
- **下載專區**：
  - 資料夾：content/downloads
  - 欄位：檔案、名稱、描述、大小、類型、日期、更新日期、分類、標籤、series、series_order、SEO標題、SEO描述
- **服務項目**：
  - 資料夾：content/services
  - 欄位：名稱、描述、詳細內容、圖示、特色圖片、流程、SEO標題、SEO描述

#### 7.1.4 簡化系列管理功能
- 透過CMS編輯series和series_order
- 提供系列選擇器和順序輸入框
- 可查看系列文章列表

#### 7.1.5 工作流程設計
- 直接發布，無審核
- 編輯者對內容負責
- 提供自檢清單和監控機制

### 7.2 SEO內容管理系統

#### 7.2.1 SEO內容檔案需求
- **SEO資料檔** (data/seo.yml)
- **SEO顯示模板** (layouts/partials/seo-content.html)
- **結構化資料** (layouts/partials/head/schema.html)

#### 7.2.2 SEO內容設置詳細規範
- **首頁**：200-300字，包含核心服務、地域關鍵字，2-4個內部連結
- **列表頁**：150-250字，介紹分類特色，1-3個內部連結
- **單一頁面**：100-200字，頁面導引，1-2個內部連結
- **服務頁面**：200-400字，強調專業性，2-4個內部連結

#### 7.2.3 SEO內容編寫指導原則
- 使用自然語言，避免關鍵字堆疊
- 內部連結融入文句
- 每段SEO內容具獨立價值
- 避免模板化表達

#### 7.2.4 關鍵字策略實施
- **核心服務**：會計師事務所、工商登記、稅務申報、財務簽證
- **地域**：台中會計師、台中工商登記
- **長尾**：公司設立流程、節稅規劃
- **問題導向**：如何設立公司、稅務問題諮詢

#### 7.2.5 SEO內容顯示與管理
- **Footer上方SEO區域**：顯示頁面專屬SEO文字
- **Footer內SEO區域**：公司簡介SEO文字
- **CMS管理**：支援富文本編輯，預覽功能，版本控制

## 第8章 效能優化與無障礙

### 8.1 簡化圖片優化策略

#### 8.1.1 手動圖片優化方案
- **30張圖片**：
  - 格式：`.webp`、`.jpg`、`.png`，單檔≤2MB
  - 尺寸：1200px、768px、480px
  - 品質：85
  - 命名：`category-description-[size].webp`
- **延遲載入**：
```javascript
const imageObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      img.classList.remove('lazy');
      imageObserver.unobserve(img);
    }
  });
});
```

- **Hugo短代碼**：
```html
{{ $image := .Page.Resources.GetMatch .src }}
<picture>
  <source media="(min-width: 1025px)" srcset="{{ $image.Resize "1200x webp" }}">
  <source media="(min-width: 641px)" srcset="{{ $image.Resize "768x webp" }}">
  <img src="{{ $image.Resize "480x webp" }}" alt="{{ .alt }}" loading="lazy">
</picture>
```

#### 8.1.2 媒體檔案管理規範
```
static/uploads/
├── images/
│   ├── hero/
│   ├── services/
│   ├── team/
│   ├── articles/
│   └── general/
├── files/
│   ├── pdf/
│   ├── excel/
│   ├── word/
│   └── zip/
└── videos/
    └── thumbnails/
```

### 8.2 CDN與快取完整配置

#### 8.2.1 Cloudflare最佳化設定
- **快取策略**：
  - 靜態資源：1年快取
  - HTML頁面：4小時CDN快取，1小時瀏覽器快取
  - API響應：5分鐘快取
- **邊緣最佳化**：
  - Gzip和Brotli壓縮
  - Polish + Mirage圖片最佳化
  - 行動裝置最佳化
  - 熱連結保護
- **進階效能**：
  - HTTP/3支援
  - 0-RTT連線
  - TLS 1.3加密
  - 智慧路由

#### 8.2.2 快取管理策略
- 自動清除：GitHub Actions清除CDN快取
- 選擇性清除：按URL模式清除
- 快取預熱：重要頁面預熱

### 8.3 載入最佳化策略

#### 8.3.1 關鍵渲染路徑最佳化
- **CSS**：內聯關鍵CSS，延遲非關鍵CSS
- **JavaScript**：延遲非必要腳本，使用現代語法
- **HTML**：壓縮移除空白和註釋

#### 8.3.2 資源載入最佳化
- 使用preload和prefetch
- 字體使用font-display: swap
- 限制第三方腳本，異步載入

### 8.4 無障礙設計完整實施

#### 8.4.1 WCAG 2.1 AA標準詳細實施
- **語義化HTML**：使用正確標籤
- **鍵盤導航**：焦點指示器，跳過連結
- **螢幕閱讀器**：ARIA標籤，圖片alt文字
- **色彩對比度**：文字≥4.5:1，重要元素≥7:1

#### 8.4.2 無障礙檔案系統
- 跳過連結模板
- ARIA標籤模板
- 鍵盤導航腳本
- 焦點樣式

